---
import type { HTMLAttributes, HTMLTag } from "astro/types";
import { grabbableDataAttribute } from "../lib/grabbable";

interface Props extends HTMLAttributes<"div"> {
    tag?: HTMLTag;
}
const props = Astro.props;

props.tag ??= "div";
props.draggable ??= "false";

const tagAttributes = { ...props };
delete tagAttributes.tag;

tagAttributes[grabbableDataAttribute] = true;
---

<props.tag {...tagAttributes}>
    <slot />
</props.tag>
<style>
    @media screen and (width > 720px) and (prefers-reduced-motion: no-preference) {
        [data-grabbable] {
            pointer-events: auto;
            cursor: grab;
        }

        [data-grabbable].grabbing {
            cursor: grabbing;
        }
    }
</style>
<script>
    import { initGrabbables } from "../lib/grabbable";
    document.addEventListener("DOMContentLoaded", initGrabbables);
</script>
